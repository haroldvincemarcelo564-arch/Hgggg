-- AFSE HUB V1 BY MIGUEL | Anime Fighting Simulator: Endless (All Stats!)
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
   Name = "AFSE HUB V1 BY MIGUEL",
   LoadingTitle = "Loading All Stats...",
   LoadingSubtitle = "Strength → 1T + Chakra/Sword/Agility/Durability/Speed!",
   ConfigurationSaving = {Enabled = true, FolderName = "AFSEHubV1", FileName = "config"},
   Discord = {Enabled = false},
   KeySystem = false
})

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local Player = Players.LocalPlayer

-- Update Char/Root on respawn
local function UpdateChar()
   Player.Character = Player.Character or Player.CharacterAdded:Wait()
   return Player.Character:WaitForChild("HumanoidRootPart")
end
local HumanoidRootPart = UpdateChar()
Player.CharacterAdded:Connect(function() HumanoidRootPart = UpdateChar() end)

-- Remotes (Spy-confirmed!)
local Remotes = ReplicatedStorage:WaitForChild("Remotes")
local TrainRemote = Remotes:WaitForChild("RemoteEvent")  -- :FireServer("Train", 1-6)
local QuestFolder = Remotes:WaitForChild("Quest")
local AcceptRemote = QuestFolder:WaitForChild("AcceptQuest")
local CompleteRemote = QuestFolder:WaitForChild("CompleteQuest")

-- TP Func
local function Teleport(CFramePos)
   pcall(function() HumanoidRootPart.CFrame = CFramePos end)
end

-- Quests (Bang/Ghoul)
local Quests = {
   Bang = {NPCPos = CFrame.new(-150, 50, 200), MobPos = CFrame.new(-200, 40, 250), NPCName = "Bang", RequiredKills = 50},
   Ghoul = {NPCPos = CFrame.new(100, 10, -50), MobPos = CFrame.new(150, 5, -100), NPCName = "Ghoul", RequiredKills = 40}
}

local function DoQuest(QuestName)
   local Quest = Quests[QuestName]
   if not Quest then return end
   pcall(function()
      Teleport(Quest.NPCPos); wait(1)
      AcceptRemote:FireServer(Quest.NPCName)
      Rayfield:Notify({Title = QuestName, Content = "Accepted!", Duration = 2})
      wait(1); Teleport(Quest.MobPos)
      for i = 1, Quest.RequiredKills do
         wait(0.2)
         pcall(function()
            for _, mob in pairs(workspace.Enemies:GetChildren()) do  -- Adjust path
               if mob:FindFirstChild("HumanoidRootPart") then
                  Teleport(mob.HumanoidRootPart.CFrame * CFrame.new(0,5,0))
                  break
               end
            end
         end)
      end
      Teleport(Quest.NPCPos); wait(1)
      CompleteRemote:FireServer(Quest.NPCName)
      Rayfield:Notify({Title = QuestName, Content = "Completed!", Duration = 2})
   end)
end

-- Main Tab
local MainTab = Window:CreateTab("Main")
MainTab:CreateSection("Auto Quest")
local QuestDropdown = MainTab:CreateDropdown({
   Name = "Quest", Options = {"Bang", "Ghoul"}, CurrentOption = {"Bang"},
   Callback = function(Option) _G.SelectedQuest = Option[1] end
})
local AutoQuestToggle = MainTab:CreateToggle({
   Name = "Auto Quest", Callback = function(Value)
      _G.AutoQuest = Value
      spawn(function()
         while _G.AutoQuest do DoQuest(_G.SelectedQuest) wait(_G.QuestDelay or 2) end
      end)
   end
})
MainTab:CreateSlider({Name = "Quest Delay", Range = {0.5, 10}, Increment = 0.5, CurrentValue = 2, Callback = function(V) _G.QuestDelay = V end})

MainTab:CreateSection("Auto Train All Stats")
local AutoTrainToggle = MainTab:CreateToggle({
   Name = "Auto Train All (Str/Dura/Chakra/Sword/Agi/Speed)",
   Callback = function(Value)
      _G.AutoTrain = Value
      spawn(function()
         while _G.AutoTrain do
            wait(_G.TrainDelay or 0.1)
            pcall(function()
               TrainRemote:FireServer("Train", 1)  -- Strength
               TrainRemote:FireServer("Train", 2)  -- Durability
               TrainRemote:FireServer("Train", 3)  -- Chakra
               TrainRemote:FireServer("Train", 4)  -- Sword
               TrainRemote:FireServer("Train", 5)  -- Agility
               TrainRemote:FireServer("Train", 6)  -- Speed
            end)
         end
      end)
   end
})
MainTab:CreateSlider({Name = "Train Delay", Range = {0.05, 2}, Increment = 0.05, CurrentValue = 0.1, Callback = function(V) _G.TrainDelay = V end})

-- Teleports Tab (Strength Areas 10K → 1T!)
local TeleTab = Window:CreateTab("Teleports")
TeleTab:CreateSection("Strength Training Areas")
local TPPositions = {
   ["10K Strength"] = CFrame.new(200, 20, 100),   -- Update w/ Save!
   ["100K Strength"] = CFrame.new(400, 20, 200),
   ["1M Strength"] = CFrame.new(600, 20, 300),    -- Meteor?
   ["10M Strength"] = CFrame.new(800, 20, 400),   -- Flying
   ["100M Strength"] = CFrame.new(1000, 20, 500), -- Arena
   ["1B Strength"] = CFrame.new(1200, 20, 600),
   ["1T Strength"] = CFrame.new(1400, 20, 700),
   Spawn = CFrame.new(0, 10, 0),
   Gym = CFrame.new(50, 5, 150),
   ["Fruit Library"] = CFrame.new(-300, 15, 100),
   ["Fruit Chakra"] = CFrame.new(200, 30, -50),
   ["Fruit 1B Chakra"] = CFrame.new(800, 40, 600),
   ["100K Speed"] = CFrame.new(1000, 25, 700)
}
local TPDropdown = TeleTab:CreateDropdown({
   Name = "Teleport", Options = {"10K Strength", "100K Strength", "1M Strength", "10M Strength", "100M Strength", "1B Strength", "1T Strength", "Spawn", "Gym", "Fruit Library", "Fruit Chakra", "Fruit 1B Chakra", "100K Speed"},
   CurrentOption = {"10K Strength"},
   Callback = function(Option) Teleport(TPPositions[Option[1]]) end
})
local SavePosButton = TeleTab:CreateButton({
   Name = "Save Current Pos (Clipboard)",
   Callback = function()
      setclipboard(tostring(HumanoidRootPart.CFrame))
      Rayfield:Notify({Title = "Saved!", Content = "Paste to TPPositions!", Duration = 3})
   end
})

-- Misc Tab
local MiscTab = Window:CreateTab("Misc")
MiscTab:CreateSection("Swords & Anti-AFK")
local EquipBestButton = MiscTab:CreateButton({
   Name = "Equip Best Sword",
   Callback = function()
      local bestSword, maxRarity = nil, 0
      for _, tool in pairs(Player.Backpack:GetChildren()) do
         if tool:IsA("Tool") and (string.find(tool.Name:lower(), "sword") or string.find(tool.Name:lower(), "blade")) then
            local rarity = tool:FindFirstChild("Rarity") and tool.Rarity.Value or 0
            if rarity > maxRarity then maxRarity = rarity; bestSword = tool end
         end
      end
      if bestSword then
         Player.Character.Humanoid:EquipTool(bestSword)
         Rayfield:Notify({Title = "Equipped", Content = bestSword.Name, Duration = 2})
      else Rayfield:Notify({Title = "No Sword", Content = "Found!", Duration = 2}) end
   end
})
local AntiAFKToggle = MiscTab:CreateToggle({
   Name = "Anti-AFK", Callback = function(Value)
      _G.AntiAFK = Value
      spawn(function()
         while _G.AntiAFK do wait(60)
            local vim = game:GetService("VirtualInputManager")
            vim:SendKeyEvent(true, "W", false, game); wait(0.1)
            vim:SendKeyEvent(false, "W", false, game)
         end
      end)
   end
})
MiscTab:CreateSection("Auto Fruit")
local AutoFruitToggle = MiscTab:CreateToggle({
   Name = "Auto TP to Fruit", Callback = function(Value)
      _G.AutoFruit = Value
      spawn(function()
         while _G.AutoFruit do wait(1)
            pcall(function()
               for _, fruit in pairs(workspace:GetChildren()) do
                  if string.find(fruit.Name:lower(), "fruit") or string.find(fruit.Name:lower(), "devil") then
                     Teleport(fruit.PrimaryPart.CFrame)
                     Rayfield:Notify({Title = "Fruit!", Content = "TPed!", Duration = 1}); break
                  end
               end
            end)
         end
      end)
   end
})

-- PvP Tab
local PvPTab = Window:CreateTab("PvP")
PvPTab:CreateSection("Auto Farm Players")
local SpawnPos = CFrame.new(0, 10, 0).Position
local SafeDist = 1000
local AutoPlayerFarmToggle = PvPTab:CreateToggle({
   Name = "Auto Farm Players (Outside Safe)",
   Callback = function(Value)
      _G.PlayerFarm = Value
      spawn(function()
         while _G.PlayerFarm do wait(0.5)
            for _, p in pairs(Players:GetPlayers()) do
               if p ~= Player and p.Character and p.Character:FindFirstChild("HumanoidRootPart") then
                  local dist = (p.Character.HumanoidRootPart.Position - SpawnPos).Magnitude
                  if dist > SafeDist then
                     Teleport(p.Character.HumanoidRootPart.CFrame * CFrame.new(0,5,0))
                     -- Add damage remote if spied
                  end
               end
            end
         end
      end)
   end
})

Rayfield:LoadConfiguration()
