-- Load Rayfield Library
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

-- Key Verification
local correctKey = "67Rizzmas"
local keyVerified = false

-- Create Key Input Window
local KeyWindow = Rayfield:CreateWindow({
    Name = "MARCELO SCRIPT - Key",
    LoadingTitle = "Enter Key",
    LoadingSubtitle = "Unlock MARCELO SCRIPT",
    ShowText = "Tap to Enter Key",
    ConfigurationSaving = { Enabled = false },
    ToggleUIKeybind = nil,
    Draggable = true
})

local KeyTab = KeyWindow:CreateTab("Key Input", "key")

local KeyInput = KeyTab:CreateInput({
    Name = "Enter Key",
    PlaceholderText = "Type the key here",
    RemoveTextAfterFocusLost = true,
    Callback = function(Input)
        if Input == correctKey then
            keyVerified = true
            Rayfield:Notify({
                Title = "Success",
                Content = "Key verified! Loading MARCELO SCRIPT...",
                Duration = 3,
            })
            KeyWindow:Destroy()
            LoadMainGUI()
        else
            Rayfield:Notify({
                Title = "Error",
                Content = "Invalid key. Try again.",
                Duration = 3,
            })
        end
    end,
})

-- Function to Load Main GUI
function LoadMainGUI()
    local Window = Rayfield:CreateWindow({
        Name = "MARCELO SCRIPT",
        LoadingTitle = "MARCELO SCRIPT",
        LoadingSubtitle = "Powered by 67Rizzmas",
        ShowText = "Tap to Open MARCELO SCRIPT",
        ConfigurationSaving = {
            Enabled = true,
            FolderName = "MarceloScriptConfig",
            FileName = "Config"
        },
        ToggleUIKeybind = nil,
        Draggable = true
    })

    -- Main Features Tab
    local MainTab = Window:CreateTab("Main Features", "home")

    -- Noclip Toggle
    MainTab:CreateToggle({
        Name = "Noclip",
        CurrentValue = false,
        Flag = "NoclipToggle",
        Callback = function(Value)
            local Player = game.Players.LocalPlayer
            local Character = Player.Character or Player.CharacterAdded:Wait()
            if Value then
                for _, part in pairs(Character:GetDescendants()) do
                    if part:IsA("BasePart") then
                        part.CanCollide = false
                    end
                end
                local connection
                connection = game:GetService("RunService").Stepped:Connect(function()
                    if not MainTab.Flags.NoclipToggle.CurrentValue then
                        connection:Disconnect()
                        return
                    end
                    for _, part in pairs(Character:GetDescendants()) do
                        if part:IsA("BasePart") then
                            part.CanCollide = false
                        end
                    end
                end)
            else
                for _, part in pairs(Character:GetDescendants()) do
                    if part:IsA("BasePart") then
                        part.CanCollide = true
                    end
                end
            end
        end,
    })

    -- Fly Toggle Button
    MainTab:CreateButton({
        Name = "Toggle Fly",
        Description = "Tap to enable/disable flying",
        Callback = function()
            local Player = game.Players.LocalPlayer
            local Character = Player.Character or Player.CharacterAdded:Wait()
            local RootPart = Character:FindFirstChild("HumanoidRootPart")
            local Humanoid = Character:FindFirstChild("Humanoid")
            if not RootPart or not Humanoid then return end

            if Player:GetAttribute("Flying") then
                Player:SetAttribute("Flying", false)
                if RootPart:FindFirstChild("FlyVelocity") then
                    RootPart.FlyVelocity:Destroy()
                end
                Rayfield:Notify({Title = "Fly", Content = "Flying disabled!", Duration = 3})
            else
                Player:SetAttribute("Flying", true)
                local BodyVelocity = Instance.new("BodyVelocity")
                BodyVelocity.Name = "FlyVelocity"
                BodyVelocity.MaxForce = Vector3.new(40000, 40000, 40000)
                BodyVelocity.Velocity = Vector3.new(0, 0, 0)
                BodyVelocity.Parent = RootPart

                local connection
                connection = game:GetService("RunService").Heartbeat:Connect(function()
                    if not Player:GetAttribute("Flying") then
                        connection:Disconnect()
                        return
                    end
                    local moveDirection = Humanoid.MoveDirection * 50
                    BodyVelocity.Velocity = moveDirection + Vector3.new(0, 5, 0)
                end)
                Rayfield:Notify({Title = "Fly", Content = "Flying enabled! Use movement controls.", Duration = 3})
            end
        end,
    })

    -- Chat Bypass Tab
    local BypassTab = Window:CreateTab("Chat Bypass", "message")

    -- Simple Word Bypass
    BypassTab:CreateButton({
        Name = "Enable Simple Word Bypass",
        Description = "Bypasses common filtered words (including adult terms)",
        Callback = function()
            local bypassMap = {
                ["fuck"] = "fück",
                ["shit"] = "shіt",
                ["bitch"] = "bіtch",
                ["ass"] = "аss",
                ["nigga"] = "nіgga",
                ["nigger"] = "nіgger",
                ["damn"] = "dаmn",
                ["cunt"] = "cünt",
                ["faggot"] = "fаggot",
                ["retard"] = "retаrd",
                ["cum"] = "cüm",
                ["creampie"] = "creаmpie",
                ["bang"] = "bаng",
            }

            local oldChat = game:GetService("TextChatService").ChatInputBarConfiguration.TargetTextChannel.SendAsync
            game:GetService("TextChatService").ChatInputBarConfiguration.TargetTextChannel.SendAsync = function(self, text)
                for word, bypass in pairs(bypassMap) do
                    text = text:gsub(word, bypass)
                        :gsub(word:upper(), bypass:upper())
                        :gsub(word:gsub("^%l", string.upper), bypass:gsub("^%l", string.upper))
                end
                oldChat(self, text)
            end
            Rayfield:Notify({Title = "Bypass", Content = "Simple word bypass enabled! Includes cum, creampie, bang ass.", Duration = 6})
        end,
    })

    -- Advanced Bypass (Zero-width spaces)
    BypassTab:CreateButton({
        Name = "Enable Advanced Bypass",
        Description = "Inserts invisible characters between letters",
        Callback = function()
            local zwsp = ""  -- Zero-width space
            local function bypassText(text)
                return text:gsub("(%a)", "%1"..zwsp):gsub(zwsp..zwsp.."+", zwsp)
            end

            local oldChat = game:GetService("TextChatService").ChatInputBarConfiguration.TargetTextChannel.SendAsync
            game:GetService("TextChatService").ChatInputBarConfiguration.TargetTextChannel.SendAsync = function(self, text)
                oldChat(self, bypassText(text))
            end
            Rayfield:Notify({Title = "Bypass", Content = "Advanced bypass enabled! Works on almost anything.", Duration = 5})
        end,
    })

    -- Disable Bypass Note
    BypassTab:CreateButton({
        Name = "Info: Disable Bypass",
        Description = "How to turn off bypasses",
        Callback = function()
            Rayfield:Notify({Title = "Info", Content = "To fully disable bypasses, re-execute the script without pressing the bypass buttons.", Duration = 8})
        end,
    })

    -- Hubs Tab (Expanded with more universal hubs)
    local HubsTab = Window:CreateTab("Script Hubs", "rocket")

    -- Existing Hubs
    HubsTab:CreateButton({
        Name = "Infinite Yield",
        Description = "Classic admin commands",
        Callback = function()
            loadstring(game:HttpGet('https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source'))()
            Rayfield:Notify({Title = "Hub", Content = "Infinite Yield loaded!", Duration = 4})
        end
    })
    HubsTab:CreateButton({
        Name = "Nameless Admin",
        Description = "Modern admin hub",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/FilteringEnabled/NamelessAdmin/main/Source"))()
            Rayfield:Notify({Title = "Hub", Content = "Nameless Admin loaded!", Duration = 4})
        end
    })
    HubsTab:CreateButton({
        Name = "Voidware",
        Description = "Premium-like universal hub",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/VoidWareHub/VoidWare/main/Source.lua"))()
            Rayfield:Notify({Title = "Hub", Content = "Voidware loaded!", Duration = 4})
        end
    })
    HubsTab:CreateButton({
        Name = "Rochip Panel",
        Description = "Admin panel with exploits",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/RedDaeth/Rochip/main/Source.lua"))()
            Rayfield:Notify({Title = "Hub", Content = "Rochip loaded!", Duration = 4})
        end
    })
    HubsTab:CreateButton({
        Name = "Fox Hub",
        Description = "Simple universal admin hub",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/FoxName123/FoxHub/main/Source"))()
            Rayfield:Notify({Title = "Hub", Content = "Fox Hub loaded!", Duration = 4})
        end
    })
    HubsTab:CreateButton({
        Name = "Ketamine",
        Description = "Decompiler/spy script",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/KetamineScript/Ketamine/main/Source.lua"))()
            Rayfield:Notify({Title = "Hub", Content = "Ketamine loaded! May lag.", Duration = 6})
        end
    })
    HubsTab:CreateButton({
        Name = "Owl Hub",
        Description = "Universal game features",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/CriShoux/OwlHub/master/OwlHub.txt"))()
            Rayfield:Notify({Title = "Hub", Content = "Owl Hub loaded!", Duration = 4})
        end
    })
    HubsTab:CreateButton({
        Name = "Dark Hub",
        Description = "Multi-game support",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/RandomAdamYT/DarkHub/master/Build-V4.lua"))()
            Rayfield:Notify({Title = "Hub", Content = "Dark Hub loaded!", Duration = 4})
        end
    })

    -- New Universal Hubs
    HubsTab:CreateButton({
        Name = "Vape V4",
        Description = "Universal hub with game-specific scripts",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/7GrandDadPGN/VapeV4ForRoblox/main/NewMainScript.lua"))()
            Rayfield:Notify({Title = "Hub", Content = "Vape V4 loaded!", Duration = 4})
        end
    })
    HubsTab:CreateButton({
        Name = "Blaze Hub",
        Description = "Lightweight universal hub",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/BlazeHCF/BlazeHub/main/source.lua"))()
            Rayfield:Notify({Title = "Hub", Content = "Blaze Hub loaded!", Duration = 4})
        end
    })
    HubsTab:CreateButton({
        Name = "Evo V2",
        Description = "Modern universal hub with clean UI",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/EvoV2Scripts/EvoV2/main/source.lua"))()
            Rayfield:Notify({Title = "Hub", Content = "Evo V2 loaded!", Duration = 4})
        end
    })
    HubsTab:CreateButton({
        Name = "Redz Hub",
        Description = "Simple hub for many games",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/REDzHUB/REDzHUB/main/REDzHUB.lua"))()
            Rayfield:Notify({Title = "Hub", Content = "Redz Hub loaded!", Duration = 4})
        end
    })
    HubsTab:CreateButton({
        Name = "Proxo",
        Description = "Classic universal admin hub",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/ProxoTeam/Proxo/main/source.lua"))()
            Rayfield:Notify({Title = "Hub", Content = "Proxo loaded!", Duration = 4})
        end
    })

    Rayfield:Notify({
        Title = "MARCELO SCRIPT Loaded",
        Content = "Added more universal hubs (Vape V4, Blaze, Evo V2, Redz, Proxo)! Use responsibly.",
        Duration = 6,
    })
end
