--  janzenmakes AFSE Unli Yen Hub (Jan 2026) | Draggable GUI | AutoFarm Mobs = INF YEN
-- Features: AutoFarm Mobs/Yen, Auto Collect Drops, Kill Aura, Auto Train, Speed Hack, Anti-AFK

local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local VirtualUser = game:GetService("VirtualUser")
local RunService = game:GetService("RunService")
local player = Players.LocalPlayer

-- Config
getgenv().Config = {
    AutoFarm = false,
    CollectDrops = false,
    KillAura = false,
    AutoTrain = false,
    SpeedHack = false,
    Speed = 50,
    FarmRange = 1000
}

-- Character
local function updateChar()
    local char = player.Character or player.CharacterAdded:Wait()
    getgenv().RootPart = char:WaitForChild("HumanoidRootPart")
    getgenv().Humanoid = char:WaitForChild("Humanoid")
end
updateChar()
player.CharacterAdded:Connect(updateChar)

-- Get Nearest Mob/Enemy (Yen Source)
local function getNearestMob()
    local closest, dist = nil, getgenv().Config.FarmRange
    for _, obj in pairs(workspace:GetDescendants()) do
        if obj.Name == "HumanoidRootPart" and obj.Parent:FindFirstChild("Humanoid") and obj.Parent.Humanoid.Health > 0 and obj.Parent ~= player.Character then
            local magnitude = (getgenv().RootPart.Position - obj.Position).Magnitude
            if magnitude < dist then
                dist = magnitude
                closest = obj.Parent
            end
        end
    end
    return closest
end

-- Anti-AFK (Always On)
spawn(function()
    while true do
        VirtualUser:CaptureController()
        VirtualUser:ClickButton2(Vector2.new())
        wait(60)
    end
end)

-- Speed Hack Loop
spawn(function()
    while true do
        wait()
        if getgenv().Config.SpeedHack then
            getgenv().Humanoid.WalkSpeed = getgenv().Config.Speed
        end
    end
end)

-- AutoFarm Loop (Yen Grind)
spawn(function()
    while true do
        if getgenv().Config.AutoFarm then
            local mob = getNearestMob()
            if mob then
                getgenv().RootPart.CFrame = mob.HumanoidRootPart.CFrame * CFrame.new(0, 10, 0)
                for _ = 1, 3 do
                    VirtualUser:ClickButton1(Vector2.new())
                end
                if getgenv().Config.KillAura then
                    for _, v in pairs(workspace:GetDescendants()) do
                        if v.Parent:FindFirstChild("Humanoid") and v.Parent.Humanoid.Health > 0 and v.Parent ~= player.Character then
                            v.Parent.HumanoidRootPart.CFrame = getgenv().RootPart.CFrame * CFrame.new(math.random(-5,5), 0, math.random(-5,5))
                        end
                    end
                end
            end
        end
        wait(0.1)
    end
end)

-- Auto Collect Drops (Yen Orbs etc.)
spawn(function()
    while getgenv().Config.CollectDrops do
        for _, drop in pairs(workspace:GetDescendants()) do
            if (drop.Name:lower():find("yen") or drop.Name:lower():find("drop") or drop.Name:lower():find("orb")) and drop:IsA("BasePart") then
                getgenv().RootPart.CFrame = drop.CFrame
            end
        end
        wait(0.3)
    end
end)

-- Auto Train Loop (Basic Stats/Chikara Zones - TP & Click)
spawn(function()
    while getgenv().Config.AutoTrain do
        -- Generic train: TP to zones & spam Z (adjust if needed)
        for _, zone in pairs(workspace:GetDescendants()) do
            if zone.Name:lower():find("train") or zone.Name:lower():find("zone") then
                getgenv().RootPart.CFrame = zone.CFrame
                VirtualUser:ClickButton1(Vector2.new())  -- Or key Z sim
                wait(0.5)
            end
        end
        wait(1)
    end
end)

-- Draggable Function
local function makeDraggable(frame)
    local dragging = false
    local dragInput, mousePos, framePos
    frame.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            mousePos = input.Position
            framePos = frame.Position
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)
    frame.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement then
            dragInput = input
        end
    end)
    UserInputService.InputChanged:Connect(function(input)
        if input == dragInput and dragging then
            local delta = input.Position - mousePos
            frame.Position = UDim2.new(framePos.X.Scale, framePos.X.Offset + delta.X, framePos.Y.Scale, framePos.Y.Offset + delta.Y)
        end
    end)
end

-- GUI Creation
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "AFSEHub"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = player.PlayerGui

local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 480, 0, 380)
MainFrame.Position = UDim2.new(0.5, -240, 0.5, -190)
MainFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 30)
MainFrame.BorderSizePixel = 0
MainFrame.Parent = ScreenGui

local MainCorner = Instance.new("UICorner")
MainCorner.CornerRadius = UDim.new(0, 16)
MainCorner.Parent = MainFrame

local MainStroke = Instance.new("UIStroke")
MainStroke.Color3 = Color3.fromRGB(70, 70, 100)
MainStroke.Thickness = 2.5
MainStroke.Transparency = 0.3
MainStroke.Parent = MainFrame

local MainGradient = Instance.new("UIGradient")
MainGradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(45, 45, 65)),
    ColorSequenceKeypoint.new(0.5, Color3.fromRGB(25, 25, 45)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(15, 15, 30))
}
MainGradient.Rotation = 135
MainGradient.Parent = MainFrame

-- Top Bar (Draggable)
local TopBar = Instance.new("Frame")
TopBar.Size = UDim2.new(1, 0, 0, 45)
TopBar.BackgroundColor3 = Color3.fromRGB(35, 35, 50)
TopBar.BorderSizePixel = 0
TopBar.Parent = MainFrame

local TopCorner = Instance.new("UICorner")
TopCorner.CornerRadius = UDim.new(0, 16)
TopCorner.Parent = TopBar

local TopStroke = Instance.new("UIStroke")
TopStroke.Color3 = Color3.fromRGB(90, 90, 120)
TopStroke.Thickness = 1
TopStroke.Parent = TopBar

local TopGradient = Instance.new("UIGradient")
TopGradient.Color = ColorSequence.new(Color3.fromRGB(55,55,75), Color3.fromRGB(30,30,50))
TopGradient.Parent = TopBar

local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1, -90, 1, 0)
Title.Position = UDim2.new(0, 15, 0, 0)
Title.BackgroundTransparency = 1
Title.Text = "üó°Ô∏è AFSE Unli Yen Hub"
Title.TextColor3 = Color3.fromRGB(220, 220, 255)
Title.TextScaled = true
Title.Font = Enum.Font.GothamBold
Title.TextXAlignment = Enum.TextXAlignment.Left
Title.Parent = TopBar

-- Close Button
local CloseBtn = Instance.new("TextButton")
CloseBtn.Size = UDim2.new(0, 35, 0, 35)
CloseBtn.Position = UDim2.new(1, -45, 0, 5)
CloseBtn.BackgroundColor3 = Color3.fromRGB(240, 60, 60)
CloseBtn.Text = "‚úï"
CloseBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseBtn.TextScaled = true
CloseBtn.Font = Enum.Font.GothamBold
CloseBtn.Parent = TopBar

local CloseCorner = Instance.new("UICorner")
CloseCorner.CornerRadius = UDim.new(0, 8)
CloseCorner.Parent = CloseBtn

local CloseGradient = Instance.new("UIGradient")
CloseGradient.Color = ColorSequence.new(Color3.fromRGB(255,80,80), Color3.fromRGB(200,40,40))
CloseGradient.Parent = CloseBtn

CloseBtn.MouseButton1Click:Connect(function()
    ScreenGui:Destroy()
end)

-- Make Draggable (TopBar)
makeDraggable(TopBar)

-- Content ScrollingFrame
local ScrollFrame = Instance.new("ScrollingFrame")
ScrollFrame.Size = UDim2.new(1, -20, 1, -65)
ScrollFrame.Position = UDim2.new(0, 10, 0, 55)
ScrollFrame.BackgroundTransparency = 1
ScrollFrame.BorderSizePixel = 0
ScrollFrame.ScrollBarThickness = 5
ScrollFrame.ScrollBarImageColor3 = Color3.fromRGB(100, 100, 140)
ScrollFrame.ScrollingDirection = Enum.ScrollingDirection.Y
ScrollFrame.Parent = MainFrame

local UIListLayout = Instance.new("UIListLayout")
UIListLayout.Padding = UDim.new(0, 10)
UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
UIListLayout.Parent = ScrollFrame

-- Toggle Function (Fancy Button)
local function createToggle(text, configKey)
    local Button = Instance.new("TextButton")
    Button.Size = UDim2.new(1, -10, 0, 50)
    Button.BackgroundColor3 = Color3.fromRGB(45, 45, 65)
    Button.Text = text .. ": OFF"
    Button.TextColor3 = Color3.fromRGB(200, 200, 220)
    Button.TextScaled = true
    Button.Font = Enum.Font.GothamSemibold
    Button.BorderSizePixel = 0
    Button.LayoutOrder = #ScrollFrame:GetChildren()
    Button.Parent = ScrollFrame

    local BtnCorner = Instance.new("UICorner")
    BtnCorner.CornerRadius = UDim.new(0, 10)
    BtnCorner.Parent = Button

    local BtnStroke = Instance.new("UIStroke")
    BtnStroke.Color3 = Color3.fromRGB(65, 65, 90)
    BtnStroke.Thickness = 1.5
    BtnStroke.Parent = Button

    local BtnGradient = Instance.new("UIGradient")
    BtnGradient.Color = ColorSequence.new(Color3.fromRGB(60,60,80), Color3.fromRGB(40,40,60))
    BtnGradient.Parent = Button

    local state = false
    Button.MouseButton1Click:Connect(function()
        state = not state
        getgenv().Config[configKey] = state
        Button.Text = text .. ": " .. (state and "ON" or "OFF")
        if state then
            Button.BackgroundColor3 = Color3.fromRGB(25, 90, 40)
            BtnGradient.Color = ColorSequence.new(Color3.fromRGB(40,140,60), Color3.fromRGB(20,80,35))
            Button.TextColor3 = Color3.fromRGB(255,255,255)
        else
            Button.BackgroundColor3 = Color3.fromRGB(45, 45, 65)
            BtnGradient.Color = ColorSequence.new(Color3.fromRGB(60,60,80), Color3.fromRGB(40,40,60))
            Button.TextColor3 = Color3.fromRGB(200, 200, 220)
        end
    end)

    -- Hover Anim
    local tween = TweenInfo.new(0.2, Enum.EasingStyle.Quart, Enum.EasingDirection.Out)
    Button.MouseEnter:Connect(function()
        TweenService:Create(Button, tween, {Size = UDim2.new(1, 0, 0, 53)}):Play()
    end)
    Button.MouseLeave:Connect(function()
        TweenService:Create(Button, tween, {Size = UDim2.new(1, -10, 0, 50)}):Play()
    end)

    UIListLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
        ScrollFrame.CanvasSize = UDim2.new(0, 0, 0, UIListLayout.AbsoluteContentSize.Y + 20)
    end)
end

-- Create Toggles
createToggle("Auto Farm Mobs (Yen)", "AutoFarm")
createToggle("Auto Collect Drops", "CollectDrops")
createToggle("Kill Aura", "KillAura")
createToggle("Auto Train", "AutoTrain")
createToggle("Speed Hack", "SpeedHack")

-- Credit
local Credit = Instance.new("TextLabel")
Credit.Size = UDim2.new(1, 0, 0, 30)
Credit.Position = UDim2.new(0, 0, 1, -40)
Credit.BackgroundTransparency = 1
Credit.Text = "Made by janzenmakes üî•"
Credit.TextColor3 = Color3.fromRGB(150, 150, 200)
Credit.TextScaled = true
Credit.Font = Enum.Font.Gotham
Credit.Parent = MainFrame

print("AFSE Hub Loaded! Drag top bar, toggle Auto Farm for unli yen üòà")
