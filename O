-- AFSE Unli Yen Hub | Full Draggable GUI | Mob Farm = Yen Grind (Jan 2026 Update)
-- Toggle Auto Farm Mobs for endless yen, Collect Drops, Kill Aura, Speed, Anti-AFK Always On

local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local VirtualUser = game:GetService("VirtualUser")
local RunService = game:GetService("RunService")
local player = Players.LocalPlayer

-- Config
getgenv().Config = {
    AutoFarm = false,
    CollectDrops = false,
    KillAura = false,
    SpeedHack = false,
    Speed = 80,
    FarmRange = 3000
}

-- Character Update
local RootPart, Humanoid
local function updateChar()
    local char = player.Character or player.CharacterAdded:Wait()
    RootPart = char:WaitForChild("HumanoidRootPart")
    Humanoid = char:WaitForChild("Humanoid")
end
updateChar()
player.CharacterAdded:Connect(updateChar)

-- Get Nearest Mob (Scans workspace for enemies)
local function getNearestMob()
    local closest = nil
    local shortest = getgenv().Config.FarmRange
    for _, v in pairs(workspace:GetDescendants()) do
        if v:IsA("Model") and v ~= player.Character and v:FindFirstChild("Humanoid") and v:FindFirstChild("HumanoidRootPart") and v.Humanoid.Health > 0 then
            local dist = (RootPart.Position - v.HumanoidRootPart.Position).Magnitude
            if dist < shortest then
                shortest = dist
                closest = v
            end
        end
    end
    return closest
end

-- Anti-AFK (Always On)
spawn(function()
    while true do
        VirtualUser:CaptureController()
        VirtualUser:ClickButton2(Vector2.new())
        wait(60)
    end
end)

-- Speed Hack
RunService.Heartbeat:Connect(function()
    if getgenv().Config.SpeedHack and Humanoid then
        Humanoid.WalkSpeed = getgenv().Config.Speed
    elseif Humanoid then
        Humanoid.WalkSpeed = 16
    end
end)

-- Auto Farm Mobs (Yen from kills)
spawn(function()
    while true do
        wait(0.15)
        if getgenv().Config.AutoFarm and RootPart then
            local mob = getNearestMob()
            if mob then
                RootPart.CFrame = mob.HumanoidRootPart.CFrame * CFrame.new(0, 8, -5)
                VirtualUser:ClickButton1(Vector2.new())
                -- Kill Aura TP enemies to you
                if getgenv().Config.KillAura then
                    for _, enemy in pairs(workspace:GetDescendants()) do
                        if enemy:IsA("Model") and enemy ~= player.Character and enemy:FindFirstChild("Humanoid") and enemy:FindFirstChild("HumanoidRootPart") and enemy.Humanoid.Health > 0 then
                            enemy.HumanoidRootPart.CFrame = RootPart.CFrame * CFrame.new(math.random(-10,10)/10, 0, -3)
                        end
                    end
                end
            end
        end
    end
end)

-- Auto Collect Drops (Yen/Chikara Orbs)
spawn(function()
    while true do
        wait(0.3)
        if getgenv().Config.CollectDrops and RootPart then
            for _, drop in pairs(workspace:GetDescendants()) do
                if drop:IsA("BasePart") and (string.find(string.lower(drop.Name), "yen") or string.find(string.lower(drop.Name), "chikara") or string.find(string.lower(drop.Name), "orb") or string.find(string.lower(drop.Name), "drop")) and drop.Parent ~= player.Character then
                    RootPart.CFrame = drop.CFrame * CFrame.new(0, 3, 0)
                    wait(0.05)
                end
            end
        end
    end
end)

-- Draggable Function
local dragging, dragInput, mousePos, framePos
local function makeDraggable(frame)
    frame.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            mousePos = input.Position
            framePos = frame.Position
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)
    frame.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement then
            dragInput = input
        end
    end)
    UserInputService.InputChanged:Connect(function(input)
        if input == dragInput and dragging then
            local delta = input.Position - mousePos
            frame.Position = UDim2.new(framePos.X.Scale, framePos.X.Offset + delta.X, framePos.Y.Scale, framePos.Y.Offset + delta.Y)
        end
    end)
end

-- Create GUI
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "AFSEUnliYenHub"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = player:WaitForChild("PlayerGui")

local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 500, 0, 400)
MainFrame.Position = UDim2.new(0.5, -250, 0.5, -200)
MainFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 40)
MainFrame.BorderSizePixel = 0
MainFrame.Parent = ScreenGui

local UICorner1 = Instance.new("UICorner")
UICorner1.CornerRadius = UDim.new(0, 12)
UICorner1.Parent = MainFrame

local UIStroke1 = Instance.new("UIStroke")
UIStroke1.Color3 = Color3.fromRGB(60, 60, 80)
UIStroke1.Thickness = 2
UIStroke1.Parent = MainFrame

local UIGradient1 = Instance.new("UIGradient")
UIGradient1.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(35, 35, 55)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(20, 20, 35))
}
UIGradient1.Rotation = 45
UIGradient1.Parent = MainFrame

-- Top Bar (Draggable)
local TopBar = Instance.new("Frame")
TopBar.Size = UDim2.new(1, 0, 0, 50)
TopBar.BackgroundColor3 = Color3.fromRGB(40, 40, 60)
TopBar.BorderSizePixel = 0
TopBar.Parent = MainFrame

local UICorner2 = Instance.new("UICorner")
UICorner2.CornerRadius = UDim.new(0, 12)
UICorner2.Parent = TopBar

local UIStroke2 = Instance.new("UIStroke")
UIStroke2.Color3 = Color3.fromRGB(80, 80, 100)
UIStroke2.Thickness = 1.5
UIStroke2.Parent = TopBar

local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1, -60, 1, 0)
Title.Position = UDim2.new(0, 15, 0, 0)
Title.BackgroundTransparency = 1
Title.Text = "ðŸ’° AFSE Unli Yen Hub"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextScaled = true
Title.Font = Enum.Font.GothamBold
Title.TextXAlignment = Enum.TextXAlignment.Left
Title.Parent = TopBar

local CloseBtn = Instance.new("TextButton")
CloseBtn.Size = UDim2.new(0, 40, 0, 40)
CloseBtn.Position = UDim2.new(1, -50, 0, 5)
CloseBtn.BackgroundColor3 = Color3.fromRGB(255, 50, 50)
CloseBtn.Text = "âœ•"
CloseBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseBtn.TextScaled = true
CloseBtn.Font = Enum.Font.GothamBold
CloseBtn.Parent = TopBar

local UICorner3 = Instance.new("UICorner")
UICorner3.CornerRadius = UDim.new(0, 8)
UICorner3.Parent = CloseBtn

CloseBtn.MouseButton1Click:Connect(function()
    ScreenGui:Destroy()
end)

makeDraggable(TopBar)

-- Scroll Frame for Toggles
local ScrollFrame = Instance.new("ScrollingFrame")
ScrollFrame.Size = UDim2.new(1, -20, 1, -70)
ScrollFrame.Position = UDim2.new(0, 10, 0, 60)
ScrollFrame.BackgroundTransparency = 1
ScrollFrame.BorderSizePixel = 0
ScrollFrame.ScrollBarThickness = 6
ScrollFrame.ScrollBarImageColor3 = Color3.fromRGB(100, 100, 120)
ScrollFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
ScrollFrame.Parent = MainFrame

local UIListLayout = Instance.new("UIListLayout")
UIListLayout.Padding = UDim.new(0, 12)
UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
UIListLayout.Parent = ScrollFrame

-- Toggle Button Function
local function createToggle(name, configKey)
    local Toggle = Instance.new("TextButton")
    Toggle.Size = UDim2.new(1, -10, 0, 55)
    Toggle.BackgroundColor3 = Color3.fromRGB(45, 45, 65)
    Toggle.Text = name .. ": OFF"
    Toggle.TextColor3 = Color3.fromRGB(200, 200, 220)
    Toggle.TextScaled = true
    Toggle.Font = Enum.Font.GothamSemibold
    Toggle.BorderSizePixel = 0
    Toggle.Parent = ScrollFrame

    local Corner = Instance.new("UICorner")
    Corner.CornerRadius = UDim.new(0, 10)
    Corner.Parent = Toggle

    local Stroke = Instance.new("UIStroke")
    Stroke.Color3 = Color3.fromRGB(70, 70, 90)
    Stroke.Thickness = 1.5
    Stroke.Parent = Toggle

    local Gradient = Instance.new("UIGradient")
    Gradient.Color = ColorSequence.new{
        ColorSequenceKeypoint.new(0, Color3.fromRGB(55, 55, 75)),
        ColorSequenceKeypoint.new(1, Color3.fromRGB(40, 40, 60))
    }
    Gradient.Parent = Toggle

    local toggled = false
    Toggle.MouseButton1Click:Connect(function()
        toggled = not toggled
        getgenv().Config[configKey] = toggled
        Toggle.Text = name .. ": " .. (toggled and "ON" or "OFF")
        if toggled then
            Toggle.BackgroundColor3 = Color3.fromRGB(30, 100, 40)
            Gradient.Color = ColorSequence.new{
                ColorSequenceKeypoint.new(0, Color3.fromRGB(50, 150, 60)),
                ColorSequenceKeypoint.new(1, Color3.fromRGB(20, 80, 30))
            }
            Toggle.TextColor3 = Color3.fromRGB(255, 255, 255)
        else
            Toggle.BackgroundColor3 = Color3.fromRGB(45, 45, 65)
            Gradient.Color = ColorSequence.new{
                ColorSequenceKeypoint.new(0, Color3.fromRGB(55, 55, 75)),
                ColorSequenceKeypoint.new(1, Color3.fromRGB(40, 40, 60))
            }
            Toggle.TextColor3 = Color3.fromRGB(200, 200, 220)
        end
    end)

    -- Hover Effect
    local tweenInfo = TweenInfo.new(0.2, Enum.EasingStyle.Quart)
    Toggle.MouseEnter:Connect(function()
        TweenService:Create(Toggle, tweenInfo, {Size = UDim2.new(1, 0, 0, 58)}):Play()
    end)
    Toggle.MouseLeave:Connect(function()
        TweenService:Create(Toggle, tweenInfo, {Size = UDim2.new(1, -10, 0, 55)}):Play()
    end)

    -- Update Canvas
    UIListLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
        ScrollFrame.CanvasSize = UDim2.new(0, 0, 0, UIListLayout.AbsoluteContentSize.Y + 20)
    end)
end

-- Create Toggles (Yen Farm = AutoFarm Mobs ON)
createToggle("Auto Farm Mobs (Yen)", "AutoFarm")
createToggle("Auto Collect Drops (Yen Orbs)", "CollectDrops")
createToggle("Kill Aura (Faster Kills)", "KillAura")
createToggle("Speed Hack (80)", "SpeedHack")

print("ðŸ’° AFSE Unli Yen Hub Loaded! Drag top bar, toggle Auto Farm Mobs for yen rain ðŸ˜ˆ")
print("TP to mob zones like Treadmill/Bandit (gear icon) - Priv server AFK max!")
